<!DOCTYPE html>
<html>
	<head>
		<script src="./js/svg/d3.js" charset="utf-8"></script>
		<script src="./js/svg/rave.js" charset="utf-8"></script>
		<script src="./js/jd.js" charset="utf-8"></script>
	</head>
		
	<body>
		<button onclick="doHideDependencies()">Hide Dependencies</button>
		<div id="canvas" style="width:820px;height:600px"/>
		<script>
			var urlContext = window.location.href + "/..";
			var jdContext = new JDContext("#canvas", urlContext, true);
			var jdCanvas = new JDCanvas(jdContext);
			
			function doHideDependencies(){
				jdCanvas.hideDependencies();
			}
			
			function getDependencies2(){
				var r = {};
				
				//item
				var item = {};
				item.id = 0;
				item.type = "jobarray";
				item.status = "pending";
				r.item = item;
				
				//the parent
				var item = {};
				item.id = 100;
				item.type = "job";
				item.status = "waiting";
				item.dependency = "*Done";
				r.parentItem = item;
				
				//sub items
				var subItems = [];
				for(var i=0;i<3;i++){
					var item = {};
					item.id = 300 + i;
					item.type = "job";
					item.status = "waiting";
					subItems.push(item);
				}
				r.subItems = subItems;
				
				return r;
			}
			
			function getDependencies(){
				var r = {};
				
				//item
				var item = {};
				item.id = 0;
				item.type = "jobarray";
				item.status = "pending";
				r.item = item;
				
				//the dependency
				var parentItem = {};
				parentItem.id = "-";
				parentItem.type = "and";
				parentItem.dependency = "done(123) && exit(123)";
				
				var items = [];
				for(var i=0;i<10;i++){
					var item = {};
					item.id = 100 + i;
					item.type = "job";
					item.status = "waiting";
					item.condition = "";
					items.push(item);
				}
				parentItem.items = items;
				r.parentItem = parentItem;
				
				//sub items
				var subItems = [];
				for(var i=0;i<3;i++){
					var item = {};
					item.id = 300 + i;
					item.type = "job";
					item.status = "waiting";
					subItems.push(item);
				}
				r.subItems = subItems;
				
				return r;
			}
			
			function main(){
				//show diagram on excel position
				jdCanvas.data = getDependencies();
				jdCanvas.show();
			}
			main()
		</script>
	</body>

</html>