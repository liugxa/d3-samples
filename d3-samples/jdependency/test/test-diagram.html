<!DOCTYPE html>
<html>
	<head>
		<script src="../js/svg/d3.js" charset="utf-8"></script>
		<script src="../js/svg/rave.js" charset="utf-8"></script>
		<script src="../js/jDependency.js" charset="utf-8"></script>
	</head>
		
	<body>
		<div id="canvas" style="width:820px;height:600px"/>
		<script>
			var urlContext = window.location.href + "/../..";
			var jdContext = new jd.JDContext("#canvas", urlContext, true);
			var jdCanvas = new jd.JDCanvas(jdContext);
			
			function getDependencies(){
				var r = {};
				
				//item
				var item = {};
				item.id = 0;
				item.type = "jobarray";
				item.status = "pending";
				r.item = item;
				
				//the dependency
				var dependency = {};
				dependency.type = "or";
				var items = [];
				
				//and item 0
				var andItem0 = {};
				andItem0.type = "and";
				var andItems0 = [];
				for(var i=0;i<3;i++){
					var item = {};
					item.id = 100 + i;
					item.type = "job";
					item.status = "waiting";
					item.condition = "Done";
					andItems0.push(item);
				}
				andItem0.items = andItems0;
				items.push(andItem0);
				
				//and item 1
				var andItem1 = {};
				andItem1.type = "and";
				var andItems1 = [];
				for(var i=0;i<3;i++){
					var item = {};
					item.id = 200 + i;
					item.type = "job";
					item.status = "waiting";
					item.condition = "Done";
					andItems1.push(item);
				}
				andItem1.items = andItems1;				
				items.push(andItem1);
				
				dependency.items = items;
				r.dependency = dependency;
				
				//sub items
				var subItems = [];
				for(var i=0;i<3;i++){
					var item = {};
					item.id = 300 + i;
					item.type = "job";
					item.status = "waiting";
					subItems.push(item);
				}
				r.subItems = subItems;
				
				return r;
			}
			
			function main(){
				//show diagram on excel position
				jdCanvas.dependencies = getDependencies();
				jdCanvas.show();
				
			}
			main()
		</script>
	</body>

</html>